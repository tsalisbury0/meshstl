<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MeshSTL</title>
  <meta name="description" content="Connecting St. Louis via Meshtastic for reliable offline communication.">

  <!-- Open Graph -->
  <meta property="og:url" content="https://meshstl.org">
  <meta property="og:type" content="website">
  <meta property="og:title" content="MeshSTL">
  <meta property="og:description" content="Connecting St. Louis via Meshtastic for reliable offline communication.">
  <meta property="og:image" content="https://meshstl.org/MeshSTL.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="meshstl.org">
  <meta property="twitter:url" content="https://meshstl.org">
  <meta name="twitter:title" content="MeshSTL">
  <meta name="twitter:description" content="Connecting St. Louis via Meshtastic for reliable offline communication.">
  <meta name="twitter:image" content="https://meshstl.org/MeshSTL512.png">

  <link rel="manifest" href="site.webmanifest" />

  <style>
    /* Reset & Base */
    * { box-sizing: border-box; margin:0; padding:0; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height:1.6; display:flex; flex-direction:column; min-height:100vh; background-color:#E7F5E1; color:#2C2D3C; }

    /* Header */
    header { background-color:#67EA94; color:#2C2D3C; text-align:center; padding:60px 20px 40px; display:flex; flex-direction:column; align-items:center; }
    header img.logo { height:60px; margin-bottom:15px; }
    header h1 { font-size:2.8rem; margin-bottom:10px; }
    header p { font-size:1.25rem; max-width:600px; }

    /* Hamburger */
    #menu-toggle { display:none; font-size:1.25rem; font-weight:600; padding:8px 20px; cursor:pointer; border:2px solid white; border-radius:6px; background:transparent; color:#2C2D3C; }
    #menu-toggle:hover, #menu-toggle:focus { background-color:#67EA94; }

    /* Nav */
    nav { background-color:#67EA94; display:flex; flex-wrap:wrap; justify-content:center; padding:15px 10px; gap:15px; }
    nav a { color:#2C2D3C; font-weight:600; text-decoration:none; padding:10px 16px; border-radius:6px; transition:0.3s; }
    nav a:hover, nav a:focus { background-color:#2C2D3C; color:#67EA94; transform:scale(1.05); }

    /* Sections */
    section { background-color:#fff; color:#2C2D3C; border-radius:12px; box-shadow:0 4px 12px rgba(27,156,58,0.15); margin-bottom:30px; padding:25px 30px; }
    section h3 { font-size:1.75rem; font-weight:700; border-bottom:2px solid #2C2D3C; padding-bottom:6px; }
    section h4 { font-size:1.4rem; margin-top:15px; margin-bottom:10px; }

    /* Links */
    main a, a, .qr-link { color:#2C2D3C; text-decoration:underline; cursor:pointer; }
    main a:hover, main a:focus, a:hover, a:focus, .qr-link:hover, .qr-link:focus { color:#145c34; }

    /* Table */
    .table-container { overflow-x:auto; margin-top:20px; }
    table.meshstl-channels { width:100%; border-collapse:collapse; min-width:600px; }
    table.meshstl-channels thead { background-color:#67EA94; color:#2C2D3C; }
    table.meshstl-channels th, table.meshstl-channels td { padding:10px; border-top:1px solid #ccc; }
    table.meshstl-channels tbody tr:nth-child(even) { background-color:#f5f5f5; }

    /* Lists */
    ul { padding-left:20px; margin-top:10px; }
    ul li { margin-bottom:6px; }

    /* Footer */
    footer { background-color:#67EA94; color:#2C2D3C; text-align:center; padding:15px 10px; font-size:0.95rem; box-shadow:0 -3px 10px rgba(0,0,0,0.1); }

    /* Scroll button */
    #scrollTopBtn { position:fixed; bottom:30px; right:30px; display:none; background-color:#67EA94; color:#2C2D3C; border:none; padding:12px 16px; border-radius:50%; cursor:pointer; }

    /* QR Modal */
    #qrModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:9999; }
    #qrModal > div { background-color:#fff; color:#2C2D3C; border-radius:10px; padding:20px; max-width:90%; max-height:90%; overflow:auto; position:relative; }
    #qrModal img { max-width:100%; max-height:80vh; display:block; margin:auto; }
    #qrModal span.close { position:absolute; top:10px; right:15px; cursor:pointer; font-weight:bold; font-size:24px; }

    /* Discord icon */
    .discord-icon { width:28px; vertical-align:middle; margin-right:8px; filter:drop-shadow(0 0 1px rgba(0,0,0,0.1)); }

    /* Dark Mode */
    @media (prefers-color-scheme: dark) {
      body { background-color:#1b1b1b; color:#E7F5E1; }
      header { background-color:#2C2D3C; color:#67EA94; }
      header h1, header p { color:#67EA94; }
      #menu-toggle { border-color:#67EA94; color:#67EA94; }
      #menu-toggle:hover, #menu-toggle:focus { background-color:#67EA94; color:#2C2D3C; }
      nav { background-color:#2C2D3C; }
      nav a { color:#E7F5E1; }
      nav a:hover, nav a:focus { background-color:#67EA94; color:#2C2D3C; }
      main a, a, .qr-link { color:#7CFFB1; }
      main a:hover, main a:focus, a:hover, a:focus, .qr-link:hover, .qr-link:focus { color:#E7F5E1; text-shadow:0 0 6px rgba(103,234,148,0.6); }
      section { background-color:#2C2D3C; color:#E7F5E1; box-shadow:0 4px 12px rgba(103,234,148,0.15); }
      section h3 { border-bottom-color:#67EA94; color:#67EA94; }
      table.meshstl-channels thead { background-color:#2C2D3C; color:#E7F5E1; }
      table.meshstl-channels tbody tr { background-color:#2C2D3C; color:#E7F5E1; }
      table.meshstl-channels tbody tr:nth-child(even) { background-color:#252525; }
      table.meshstl-channels tbody tr:hover { background-color:#333; }
      footer { background-color:#2C2D3C; color:#67EA94; }
      #scrollTopBtn { background-color:#2C2D3C; color:#67EA94; }
      #qrModal > div { background-color:#2C2D3C; color:#E7F5E1; }
    }

/* Mobile */
@media (max-width: 768px) {
  section { padding: 20px 15px; }
  table.meshstl-channels { min-width: 100%; }
  #menu-toggle { display: inline-flex; }

  nav {
    flex-direction: column;
    max-height: 0;
    overflow: hidden;
    padding: 0 10px; /* collapsed padding */
    border-radius: 0 0 12px 12px;
    transition: max-height 0.35s ease, padding 0.35s ease;
  }

  nav.open {
    max-height: 1000px; /* expanded height */
    padding: 15px 10px; /* expanded padding */
  }

  nav a {
    width: 100%;
    text-align: center;
    border-bottom: 1px solid rgba(255,255,255,0.2);
    border-radius: 0;
  }

  nav a:last-child { border-bottom: none; }
}
  </style>
</head>
<body>

<header>
  <img src="MeshSTL512.png" alt="MeshSTL Logo" class="logo">
  <h1>Welcome to MeshSTL</h1>
  <p>Connecting St. Louis through Meshtastic - A reliable communication network</p>
  <button id="menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">&#9776; Sections</button>
</header>

<nav id="primary-navigation" role="navigation" aria-label="Primary navigation">
  <a href="#about">About</a>
  <a href="#get-involved">Get Involved</a>
  <a href="#lora-settings">LoRa Config</a>
  <a href="#channels">MeshSTL Channels</a>
  <a href="#easystem">EAS System</a>
  <a href="#mqtt-settings">MQTT Server</a>
  <a href="#meshview">Mesh Info</a>
</nav>

<main>
  <section id="about">
    <h3>About MeshSTL</h3>
    <p>MeshSTL is a community-driven initiative to bring offline communication to the St. Louis area using the Meshtastic platform. Each device acts as a node passing messages between others to ensure connectivity.</p>
  </section>

  <section id="get-involved">
    <h3>Get Involved</h3>
    <p>Join our community discussions on our forums and Discord server.</p>
    <p>
      <a href="https://discord.gg/QYxUdKZpBd" target="_blank" rel="noopener noreferrer">
        <img src="https://cdn.discordapp.com/icons/1269722750432317481/550da12a8154e5d6573f9a5b1db6d110.webp?size=100&quality=lossless" alt="Discord" class="discord-icon">
        MeshSTL Discord
      </a>
    </p>
  </section>

  <section id="lora-settings">
    <h3>LoRa Config</h3>
    <ul>
      <li><strong>Use Modem Preset:</strong> True</li>
      <li><strong>Modem Preset:</strong> Long_Fast</li>
      <li><strong>Frequency Offset:</strong> 0.0</li>
      <li><strong>Region:</strong> United States</li>
      <li><strong>Hop Limit:</strong> 3-7</li>
      <li><strong>TX Enabled:</strong> True</li>
      <li><strong>TX Power:</strong> 30</li>
      <li><strong>Frequency Slot:</strong> 20</li>
      <li><strong>Override Duty Cycle:</strong> True</li>
      <li><strong>Override Frequency:</strong> 906.875</li>
      <li><strong>Ignore MQTT:</strong> False</li>
      <li><strong>OK to MQTT:</strong> True</li>
    </ul>
  </section>

  <section id="channels">
    <h3>MeshSTL Channels</h3>
    <div class="table-container">
      <table class="meshstl-channels">
        <thead>
          <tr>
            <th>Channel Name</th>
            <th>Role</th>
            <th>Purpose</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>LongFast</td><td>Primary</td><td>Node discovery, chatting outside network</td></tr>
          <tr><td>MeshSTL</td><td>Secondary</td><td>Primary internal mesh communication</td></tr>
          <tr><td>Desired EAS Channel/s</td><td>Secondary</td><td>Emergency Alert System</td></tr>
        </tbody>
      </table>
    </div>
    <ul>
      <li>Scan the QR Code in Meshtastic App</li>
      <li>Select Replace</li>
      <li>Click Accept</li>
    </ul>
    <p><a class="qr-link" onclick="showQR(); return false;">Click to scan QR Code for all channels</a></p>

    <div id="qrModal">
      <div>
        <span class="close" onclick="closeQR()">&times;</span>
        <img src="/qr-code.png" alt="MeshSTL All Channels QR Code">
      </div>
    </div>
  </section>

  <section id="easystem">
    <h3>EAS System</h3>
    <p>Special channels designed for emergency alerts from EAS Node.</p>
    <h4>Coverage Area</h4>
    <img src="MeshSTL-EAS.png" alt="Coverage Map" style="max-width:100%; height:auto; margin-bottom:1em;">
    <ul>
      <li><strong>RED:</strong> MeshSTL-EAS</li>
      <li><strong>BLUE:</strong> CMRG-EAS</li>
      <li><strong>PURPLE:</strong> ILMesh-EAS</li>
      <li><strong>ORANGE:</strong> SEMO-EAS</li>
      <li><strong>YELLOW:</strong> Ozarks-EAS</li>
      <li><strong>PINK:</strong> NEMO-EAS</li>
      <li><strong>PSK Key:</strong> AQ==</li>
    </ul>
  </section>

  <section id="mqtt-settings">
    <h3>MQTT Server</h3>
    <p>Optional but recommended for routers/clients. Enter these settings in your Meshtastic app.</p>
    <ul>
      <li><strong>Host:</strong> mqtt.meshstl.org</li>
      <li><strong>Port:</strong> 1883</li>
      <li><strong>Encryption:</strong> Yes</li>
      <li><strong>Username:</strong> MeshSTL</li>
      <li><strong>Password:</strong> meshstl</li>
      <li><strong>Root Topic:</strong> msh/US/MO</li>
    </ul>
  </section>

  <section id="meshview">
    <h3>Mesh Info</h3>
    <div style="background-color:#fff3cd; color:#856404; padding:15px 20px; margin-bottom:20px; border:2px solid #856404; border-radius:10px; font-weight:bold;">
      ⚠️ Currently testing. Site may go down without notice.
    </div>
    <p>Access the Mesh Info via <a href="https://meshview.meshstl.org/" target="_blank" style="color:#856404;">Meshview app</a>.</p>
  </section>
</main>

<footer>&copy; 2025 MeshSTL Community. All rights reserved.</footer>

<button id="scrollTopBtn" aria-label="Scroll to top" title="Scroll to top">⬆️</button>

<script>
  const menuToggle=document.getElementById('menu-toggle');
  const nav=document.getElementById('primary-navigation');
  menuToggle.addEventListener('click', () => {
  nav.classList.toggle('open');
  menuToggle.setAttribute('aria-expanded', nav.classList.contains('open'));
});
  nav.querySelectorAll('a').forEach(link => {
  link.addEventListener('click', () => {
    if(nav.classList.contains('open')) {
      nav.classList.remove('open');
      menuToggle.setAttribute('aria-expanded', false);
    }
  });
});

  function showQR(){ document.getElementById('qrModal').style.display='flex'; document.body.classList.add('modal-open'); }
  function closeQR(){ document.getElementById('qrModal').style.display='none'; document.body.classList.remove('modal-open'); }

  const scrollBtn=document.getElementById('scrollTopBtn');
  window.addEventListener('scroll',()=>{ scrollBtn.style.display=(window.scrollY>150)?'block':'none'; });
  scrollBtn.addEventListener('click',()=>{ window.scrollTo({top:0,behavior:'smooth'}); });
</script>

</body>
</html>
