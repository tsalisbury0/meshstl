<!DOCTYPE html>
<html lang="en">
<head>
<meta name="description" content="Connecting St. Louis via Meshtastic network for reliable, soon to be offline communication.">
<title>MeshSTL</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">

<style>
  /* Reset and base */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #E7F5E1; /* Light background */
    color: #1B9C3A; /* Meshtastic green */
    line-height: 1.6;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  header {
    background-color: #1B9C3A;
    color: white;
    text-align: center;
    padding: 60px 20px 40px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
    position: relative; /* for hamburger positioning */
  }
  header h1 {
    font-weight: 700;
    font-size: 2.8rem;
    margin-bottom: 10px;
  }
  header p {
    font-size: 1.25rem;
    max-width: 600px;
    margin: 0 auto;
    font-weight: 400;
  }

  /* NAVIGATION */
  nav {
    background-color: #17A56E; /* Slightly darker green */
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    padding: 15px 10px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    gap: 15px;
    transition: max-height 0.3s ease;
  }
  nav a {
    color: white;
    font-weight: 600;
    text-decoration: none;
    padding: 10px 16px;
    border-radius: 6px;
    transition: background-color 0.3s ease, transform 0.2s ease;
    font-size: 1.1rem;
    user-select: none;
  }
  nav a:hover,
  nav a:focus {
    background-color: #145c34;
    color: white;
    transform: scale(1.05);
    outline: none;
  }

  main {
    flex-grow: 1;
    padding: 30px 20px 60px;
    max-width: 900px;
    margin: 0 auto;
    width: 100%;
  }

  section {
    background-color: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(27, 156, 58, 0.15);
    margin-bottom: 30px;
    padding: 25px 30px;
    color: #1B9C3A;
  }
  section h3 {
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.75rem;
    font-weight: 700;
    border-bottom: 2px solid #17A56E;
    padding-bottom: 6px;
  }
  section p, section ul {
    font-size: 1.1rem;
    font-weight: 400;
  }
  section ul {
    padding-left: 20px;
    margin-top: 10px;
  }
  section ul li {
    margin-bottom: 6px;
  }

  a {
    color: #1B9C3A;
    text-decoration: underline;
    transition: color 0.25s ease;
  }
  a:hover,
  a:focus {
    color: #145c34;
    outline: none;
  }

  .discord-icon {
    width: 28px;
    vertical-align: middle;
    margin-right: 8px;
    filter: drop-shadow(0 0 1px rgba(0,0,0,0.1));
  }

  footer {
    background-color: #1B9C3A;
    color: white;
    text-align: center;
    padding: 15px 10px;
    font-size: 0.95rem;
    box-shadow: 0 -3px 10px rgba(0,0,0,0.1);
    position: sticky;
    bottom: 0;
    user-select: none;
  }

  /* Hamburger Button */
  #menu-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 2rem;
    color: #fff;
    cursor: pointer;
    padding: 10px 20px;
    user-select: none;
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1000;
  }

  /* MOBILE NAVIGATION */
  @media (max-width: 768px) {
    nav {
      flex-direction: column;
      max-height: 0;
      overflow: hidden;
      padding: 0 10px;
      gap: 0;
      box-shadow: none;
      background-color: #17A56E;
      border-radius: 0 0 12px 12px;
      transition: max-height 0.35s ease;
    }

    nav.open {
      max-height: 1000px; /* large enough to show all links */
      padding: 15px 10px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    nav a {
      padding: 12px 16px;
      font-size: 1.2rem;
      border-radius: 0;
      border-bottom: 1px solid rgba(255,255,255,0.2);
      width: 100%;
      text-align: center;
      gap: 0;
    }
    nav a:last-child {
      border-bottom: none;
    }

    /* Show hamburger button */
    #menu-toggle {
      display: block;
    }
  }

  /* Smaller devices adjustments */
  @media (max-width: 600px) {
    nav a {
      font-size: 1rem;
      padding: 8px 12px;
    }
    header h1 {
      font-size: 2rem;
    }
    header p {
      font-size: 1rem;
      max-width: 100%;
    }
    main {
      padding: 20px 15px 50px;
    }
    section {
      padding: 20px 15px;
    }
    section h3 {
      font-size: 1.4rem;
    }
  }
</style>
</head>
<body>

<header>
  <h1>Welcome to MeshSTL</h1>
  <p>Connecting St. Louis through Meshtastic - A reliable communication network</p>
  <button id="menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="primary-navigation">&#9776;</button>
</header>

<nav id="primary-navigation" role="navigation" aria-label="Primary navigation">
  <a href="#about">About</a>
  <a href="#how-it-works">How It Works</a>
  <a href="#get-involved">Get Involved</a>
  <a href="#lora-settings">LoRa Config</a>
  <a href="#channels">MeshSTL Channels</a>
  <a href="#meshstleas">MeshSTL-EAS</a>
  <a href="#mqtt-settings">MQTT Server</a>
  <a href="#node-list">Node List</a>
  <a href="#meshmap">MeshMap</a>
</nav>

    <main>
        <section id="about">
            <h3>About MeshSTL</h3>
            <p>MeshSTL is a community-driven initiative to bring offline communication to the St. Louis area using the Meshtastic platform. By utilizing low-power, long-range radios, our mesh network allows people to stay connected without relying on cellular networks or the internet.</p>
        </section>

        <section id="how-it-works">
            <h3>How It Works</h3>
            <p>MeshSTL works by creating a decentralized mesh network, where each device acts as a node, passing messages between other nodes. This ensures that communication can continue even if the internet or traditional phone networks go down. Users can join the network by using Meshtastic-compatible devices, such as the TTGO T-Beam. For a list of supported devices, visit <a href="https://meshtastic.org/docs/hardware/devices/" target="_blank" rel="noopener noreferrer">Meshtastic Hardware Devices</a>.</p>
	    <p><strong>MQTT Note:</strong> Those who choose to use the MQTT server (listed below) are out of range of other MeshSTL users or run ROUTER or ROUTER_LATE nodes to extend the mesh over the internet.</p>
        </section>

        <section id="get-involved">
            <h3>Get Involved</h3>
            <p>We are always looking for new members to join the MeshSTL network. Whether you want to install your own Meshtastic device or help spread the word about MeshSTL, there are many ways you can contribute to building a resilient communication network for our region.</p>
            <p>If you have any questions or want to get involved, reach out to us! You can also join our community discussions on our forums and Discord server.</p>
            <p>Join us on Discord: 
                <a href="https://discord.gg/QYxUdKZpBd" target="_blank" rel="noopener noreferrer">
                    <img src="https://cdn.discordapp.com/icons/1269722750432317481/550da12a8154e5d6573f9a5b1db6d110.webp?size=100&quality=lossless" alt="Discord Server Logo" class="discord-icon">
                    MeshSTL Discord
                </a>
            </p>
        </section>

	<section id="channels">
	  <h3>MeshSTL Channels</h3>
	  <p>
	    MeshSTL uses multiple Meshtastic channels to organize communication.
	    The <strong>Primary channel</strong> is for node discovery and general chat,
	    while <strong>Secondary channels</strong> serve specific roles like area mesh chats and emergency alerting. (Easy setup QR Code available for scanning below)
	  </p>

	  <div style="overflow-x: auto; -webkit-overflow-scrolling: touch; margin-top: 20px;">
	    <table style="width:100%; border-collapse: collapse;">
	      <thead>
	        <tr style="background-color: #17A56E; color: white;">
	          <th style="padding: 10px; text-align: left; border-radius: 8px 0 0 0;">Channel Role</th>
	          <th style="padding: 10px; text-align: left;">Channel Name</th>
	          <th style="padding: 10px; text-align: left;">Purpose</th>
	        </tr>
	      </thead>
	      <tbody style="background-color: #fff; color: #1B9C3A;">
	        <tr>
	          <td style="padding: 10px; border-top: 1px solid #ccc;"><strong>Primary</strong></td>
	          <td style="padding: 10px; border-top: 1px solid #ccc;"><strong>LongFast</strong></td>
	          <td style="padding: 10px; border-top: 1px solid #ccc;">Node discovery, chatting with nodes outside the MeshSTL network</td>
	        </tr>
	        <tr>
	          <td style="padding: 10px;"><strong>Secondary</strong></td>
	          <td style="padding: 10px;"><strong>MeshSTL</strong></td>
	          <td style="padding: 10px;">Primary internal mesh communication</td>
	        </tr>
	        <tr>
	          <td style="padding: 10px;"><strong>Secondary</strong></td>
	          <td style="padding: 10px;"><strong>MeshSTL-EAS</strong></td>
	          <td style="padding: 10px;">Emergency Alert System (EAS) alerts (see section below)</td>
	        </tr>
	      </tbody>
	    </table>
	  </div>

	  <p style="margin-top: 20px;">To join the MeshSTL network:</p>
	  <ul style="margin-top: 10px; padding-left: 20px;">
	    <li>Scan the QR Code below on the Meshtastic App</li>
	    <li>Select Replace</li>
	    <li>Click Accept</li>
	  </ul>

	  <p style="margin-top: 20px;">
	    <a href="#" onclick="showQR()" style="color: #17A56E; text-decoration: underline;">Click here to scan a QR Code for all channels</a>
	  </p>

	  <!-- QR Modal -->
	  <div id="qrModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.6); align-items:center; justify-content:center;">
		    <div style="background:white; padding:20px; border-radius:10px; position:relative; max-width:90%; max-height:90%;">
	      <span onclick="document.getElementById('qrModal').style.display='none'" style="position:absolute; top:10px; right:15px; cursor:pointer; font-weight:bold; font-size: 24px;">&times;</span>
	      <img src="/qr-code.png" alt="MeshSTL All Channels QR Code" style="max-width:100%; max-height:80vh; display:block; margin:auto;">
	    </div>
	  </div>

	  <script>
	    function showQR() {
	      document.getElementById('qrModal').style.display = 'flex';
	    }
	  </script>
	</section>

        <section id="meshstleas">
            <h3>MeshSTL-EAS</h3>
            <p>MeshSTL-EAS is a special channel designed for emergency alert systems (EAS) sent from the dedicated EAS Node (see node list). It is used to broadcast critical emergency alerts within the MeshSTL network. (See section above for settings)</p>
            <p>Ensure these settings are correctly configured in the device to ensure seamless integration with the MeshSTL-EAS system. If you are configuring a Meshtastic device for this channel, follow the steps outlined here.</p>
            <p><strong>Important Notes:</strong> The uplink and downlink are only needed if you are using MQTT for communication. For other setups, these may not be necessary.</p>

            <h4>Coverage Area (Counties/Cities)</h4>
            <p>The MeshSTL-EAS channel covers the following counties and cities:</p>
            <ul>
                <li><strong>In Illinois:</strong> Calhoun, Jersey, Madison, Monroe, St. Clair</li>
                <li><strong>In Missouri:</strong> City of St. Louis, Franklin, Jefferson, St. Charles, St. Louis, Warren</li>
            </ul>
        </section>

        <section id="mqtt-settings">
            <h3>MQTT Server (Recommended for Routers/Optional for Clients)</h3>
            <p>You can sync messages and extend the Mesh using the MeshSTL MQTT broker (CLIENT_MUTE and CLIENT_HIDDEN nodes won't extend the mesh). Enter these settings in your Meshtastic app.  
            In the <strong>Channel</strong> section of the radio config, make sure <strong>Uplink</strong> is enabled if you choose to use MQTT. <strong>Downlink</strong> is recommended on <em>LongFast</em> unless you don't want to extend the mesh more; however, it is recommended for MeshSTL and MeshSTL-EAS LoRa channels.</p>
        <ul>
            <li><strong>Host:</strong> mqtt.meshstl.org</li>
            <li><strong>Port:</strong> 1883</li>
	    <li><strong>Encryption:</strong> Yes</li>
            <li><strong>Username:</strong> MeshSTL</li>
            <li><strong>Password:</strong> meshstl</li>
	    <li><strong>Root Topic:</strong> msh/US/MO</li>

        </ul>
        <p>Using MQTT helps to extend the network by bridging radios beyond local LoRa range.</p>
    </section>

    <section id="node-list">
        <h3>MeshSTL Node List</h3>
        <p>To see the full list of nodes actively participating in the MeshSTL network, please visit the <a href="node-list.html" style="color:#1B9C3A; text-decoration: underline;">dedicated Node List page</a>.</p>
        <p>If you want to add your node, join our Discord and Direct Message <a href="https://discordapp.com/users/593994876664807444" target="_blank" rel="noopener noreferrer">@tsalisbury0</a> to request an account to make edits to the node list.</p>
    </section>

    <section id="meshmap">
        <h3>MeshMap</h3>
        <p>The MeshMap is a visual map showing the distribution and status of nodes across the MeshSTL network as well as other MQTT based nodes around the world.</p>
        <p><a href="https://meshmap.net" target="_blank" rel="noopener noreferrer">View the MeshMap</a></p>
    </section>
</main>

<footer>
    &copy; 2025 MeshSTL Community. All rights reserved.
</footer>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const nav = document.getElementById('primary-navigation');

  menuToggle.addEventListener('click', () => {
    const isOpen = nav.classList.toggle('open');
    menuToggle.setAttribute('aria-expanded', isOpen);
  });
</script>

</html>