<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>MeshSTL</title>
  <meta name="description" content="Connecting St. Louis via Meshtastic for reliable offline communication.">

  <!-- Open Graph (Facebook & Twitter) -->
  <meta property="og:url" content="https://meshstl.org">
  <meta property="og:type" content="website">
  <meta property="og:title" content="MeshSTL">
  <meta property="og:description" content="Connecting St. Louis via Meshtastic for reliable offline communication.">
  <meta property="og:image" content="https://meshstl.org/MeshSTL.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="meshstl.org">
  <meta property="twitter:url" content="https://meshstl.org">
  <meta name="twitter:title" content="MeshSTL">
  <meta name="twitter:description" content="Connecting St. Louis via Meshtastic for reliable offline communication.">
  <meta name="twitter:image" content="https://meshstl.org/MeshSTL512.png">

  <!-- PWA manifest -->
  <link rel="manifest" href="site.webmanifest" />

  <style>
/* Reset and base */
* {
  box-sizing: border-box;
}
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #E7F5E1; /* Light background */
  color: #67EA94; /* Meshtastic green */
  line-height: 1.6;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

header {
  background-color: #67EA94;
  color: #2C2D3C;
  text-align: center;
  padding: 60px 20px 40px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.15);
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

header h1 {
  font-weight: 700;
  font-size: 2.8rem;
  margin-bottom: 10px;
}

header p {
  font-size: 1.25rem;
  max-width: 600px;
  margin: 0 auto;
  font-weight: 400;
}

/* Hamburger Button */
#menu-toggle {
  font-size: 1.25rem;
  font-weight: 600;
  padding: 8px 20px;
  background-color: transparent;
  border: 2px solid white;
  border-radius: 6px;
  color: #2C2D3C;
  cursor: pointer;
  user-select: none;
  margin-top: 20px;
  align-self: center;
  display: inline-flex;
  align-items: center;
  gap: 8px; /* space between icon and text */
  transition: background-color 0.3s ease;
}

#menu-toggle:hover,
#menu-toggle:focus {
  background-color: #67EA94;
  outline: none;
}

/* NAVIGATION */
nav {
  background-color: #67EA94; /* Slightly darker green */
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  padding: 15px 10px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  gap: 15px;
  transition: max-height 0.3s ease;
}

nav a {
  color: #2C2D3C;
  font-weight: 600;
  text-decoration: none;
  padding: 10px 16px;
  border-radius: 6px;
  transition: background-color 0.3s ease, transform 0.2s ease;
  font-size: 1.1rem;
  user-select: none;
}

nav a:hover,
nav a:focus {
  background-color: #2C2D3C;
  color: #2C2D3C;
  transform: scale(1.05);
  outline: none;
}

main a {
  color: #2C2D3C;
  text-decoration: underline;
  transition: color 0.25s ease;
}

main a:hover,
main a:focus {
  color: #145c34;
  outline: none;
}

/* Override nav links to look like buttons */
nav a {
  color: #2C2D3C;
  text-decoration: none !important;
  font-weight: 600;
  padding: 10px 16px;
  border-radius: 6px;
  transition: background-color 0.3s ease, transform 0.2s ease;
}

nav a:hover,
nav a:focus {
  background-color: #2C2D3C;
  color: #67EA94; /* contrast color */
  transform: scale(1.05);
}

section {
  background-color: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(27, 156, 58, 0.15);
  margin-bottom: 30px;
  padding: 25px 30px;
  color: #2C2D3C;
}

section h3 {
  margin-top: 0;
  margin-bottom: 15px;
  font-size: 1.75rem;
  font-weight: 700;
  border-bottom: 2px solid #2C2D3C;
  padding-bottom: 6px;
}

section p, section ul {
  font-size: 1.1rem;
  font-weight: 400;
}

section ul {
  padding-left: 20px;
  margin-top: 10px;
}

section ul li {
  margin-bottom: 6px;
}

a {
  color: #2C2D3C;
  text-decoration: underline;
  transition: color 0.25s ease;
}

a:hover,
a:focus {
  color: #145c34;
  outline: none;
}

.discord-icon {
  width: 28px;
  vertical-align: middle;
  margin-right: 8px;
  filter: drop-shadow(0 0 1px rgba(0,0,0,0.1));
}

footer {
  background-color: #67EA94;
  color: #2C2D3C;
  text-align: center;
  padding: 15px 10px;
  font-size: 0.95rem;
  box-shadow: 0 -3px 10px rgba(0,0,0,0.1);
  position: sticky;
  bottom: 0;
  user-select: none;
}

/* MOBILE NAVIGATION */
@media (max-width: 768px) {
  #menu-toggle {
    display: block;
  }

  nav {
    flex-direction: column;
    max-height: 0;
    overflow: hidden;
    padding: 0 10px;
    gap: 0;
    box-shadow: none;
    background-color: #67EA94;
    border-radius: 0 0 12px 12px;
    transition: max-height 0.35s ease;
  }

  nav.open {
    max-height: 1000px; /* large enough to show all links */
    padding: 15px 10px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  nav a {
    padding: 12px 16px;
    font-size: 1.2rem;
    border-radius: 0;
    border-bottom: 1px solid rgba(255,255,255,0.2);
    width: 100%;
    text-align: center;
    gap: 0;
  }

  nav a:last-child {
    border-bottom: none;
  }
}

/* Smaller devices adjustments */
@media (max-width: 600px) {
  nav a {
    font-size: 1rem;
    padding: 8px 12px;
  }
  header h1 {
    font-size: 2rem;
  }
  header p {
    font-size: 1rem;
    max-width: 100%;
  }
  main {
    padding: 20px 15px 50px;
  }
  section {
    padding: 20px 15px;
  }
  section h3 {
    font-size: 1.4rem;
  }
}

/* Modal styles (QR code) */
#qrModal {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.6);
  align-items: center;
  justify-content: center;
  z-index: 9999;
  padding: 10px;
  overflow: auto;
  display: flex;
}

#qrModal > div {
  background: white;
  padding: 20px;
  border-radius: 10px;
  position: relative;
  max-width: 90%;
  max-height: 90%;
  overflow: auto;
}

#qrModal img {
  max-width: 100%;
  max-height: 80vh;
  display: block;
  margin: auto;
}

body.modal-open {
  overflow: hidden;
}

#scrollTopBtn {
  position: fixed;
  bottom: 30px;
  right: 30px;
  display: none;
  background-color: #67EA94;
  color: white;
  border: none;
  padding: 12px 16px;
  border-radius: 50%;
  font-size: 1.5rem;
  cursor: pointer;
  box-shadow: 0 3px 6px rgba(27, 156, 58, 0.7);
  z-index: 10000;
  user-select: none;
  transition: opacity 0.3s ease;
}

#scrollTopBtn:hover,
#scrollTopBtn:focus {
  background-color: #67EA94;
  outline: none;
  opacity: 0.85;
}

@media (min-width: 769px) {
  #menu-toggle {
    display: none !important;
  }
}
  </style>
</head>
<body>

<header>
  <img src="MeshSTL512.png" alt="MeshSTL Logo" class="logo">
  <h1>Welcome to MeshSTL</h1>
  <p>Connecting St. Louis through Meshtastic - A reliable communication network</p>
  <button id="menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="primary-navigation">&#9776; Sections</button>
</header>

<style>
  header img.logo {
    height: 60px;
    display: block;
    margin: 0 auto 15px auto; /* centers and adds spacing below */
  }
</style>


<nav id="primary-navigation" role="navigation" aria-label="Primary navigation">
  <a href="#about">About</a>
  <a href="#get-involved">Get Involved</a>
  <a href="#lora-settings">LoRa Config</a>
  <a href="#channels">MeshSTL Channels</a>
  <a href="#easystem">EAS System</a>
  <a href="#mqtt-settings">MQTT Server</a>
  <a href="#meshview">Mesh Info</a>
</nav>

<main>
	<section id="about">
	    <h3>About MeshSTL</h3>
	    <p>MeshSTL is a community-driven initiative to bring offline communication to the St. Louis area using the Meshtastic platform. By leveraging low-power, long-range radios, our decentralized mesh network allows people to stay connected without relying on cellular networks or the internet.</p>
	    <p>Each Meshtastic-compatible device acts as a node, passing messages between other nodes to ensure communication persists—even during internet or phone outages. Devices like the TTGO T-Beam can be used to join the network. For a list of supported devices, visit <a href="https://meshtastic.org/docs/hardware/devices/" target="_blank" rel="noopener noreferrer">Meshtastic Hardware Devices</a>.</p>
	    <p><strong>MQTT Note:</strong> Those using the MQTT server (listed below) are typically either out of range of other MeshSTL users or operate ROUTER or ROUTER_LATE nodes to extend the mesh across the internet.</p>
	    <p><strong>Warning</strong> Enabling Licensed amateur radio (HAM) on the User Config module will likely cause issues connecting to MeshSTL as it disables AES Encryption.</p>
	</section>

        <section id="get-involved">
            <h3>Get Involved</h3>
            <p>We are always looking for new members to join the MeshSTL network. Whether you want to install your own Meshtastic device or help spread the word about MeshSTL, there are many ways you can contribute to building a resilient communication network for our region.</p>
            <p>If you have any questions or want to get involved, reach out to us! You can also join our community discussions on our forums and Discord server.</p>
            <p>Join us on Discord: 
                <a href="https://discord.gg/QYxUdKZpBd" target="_blank" rel="noopener noreferrer">
                    <img src="https://cdn.discordapp.com/icons/1269722750432317481/550da12a8154e5d6573f9a5b1db6d110.webp?size=100&quality=lossless" alt="Discord Server Logo" class="discord-icon">
                    MeshSTL Discord
                </a>
            </p>
        </section>
	
	<section id="lora-settings">    
		<h3>LoRa Config</h3>
		<ul>
			<li><strong>Use Modem Preset</strong> True</li>
			<li><strong>Modem Preset</strong> Long_Fast</li>
			<li><strong>Frequency Offset</strong> 0.0</li>
			<li><strong>Region</strong> United States</li>
			<li><strong>Hop Limit</strong> 3 (minimum) - 7 (maximum)</li>
			<li><strong>TX enabled</strong> True</li>
			<li><strong>TX Power</strong> 30</li>
			<li><strong>Frequency Slot</strong> 20</li>
			<li><strong>Overide Duty Cycle</strong> True</li>
			<li><strong>Overide Frequency</strong> 906.875</li>
			<li><strong>Ignore MQTT</strong> False</li>
			<li><strong>OK to MQTT</strong> True</li>
		</ul>
	</section>
	    
	<section id="channels">
	  <h3>MeshSTL Channels</h3>
	  <p>
	    MeshSTL uses multiple Meshtastic channels to organize communication.
	    The <strong>Primary channel</strong> is for node discovery and general chat,
	    while <strong>Secondary channels</strong> serve specific roles like area mesh chats and emergency alerting. (Easy setup QR Code available for scanning below)
	  </p>

	<style>
  /* Table container scroll */
  .table-container {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin-top: 20px;
  }

  table.meshstl-channels {
    width: 100%;
    border-collapse: collapse;
    min-width: 600px; /* ensures horizontal scroll on small screens */
  }

  table.meshstl-channels thead tr {
    background-color: #67EA94;
    color: #2C2D3C;
  }

  table.meshstl-channels th,
  table.meshstl-channels td {
    padding: 10px;
    text-align: left;
    border-top: 1px solid #ccc;
  }

  table.meshstl-channels th:first-child {
    border-radius: 8px 0 0 0;
  }

  table.meshstl-channels th:last-child {
    border-radius: 0 8px 0 0;
  }

  table.meshstl-channels tbody {
    background-color: #fff;
    color: #2C2D3C;
  }

  /* Responsive adjustments for smaller devices */
  @media (max-width: 600px) {
    table.meshstl-channels th,
    table.meshstl-channels td {
      padding: 8px 6px;
      font-size: 0.9rem;
    }
  }
</style>

<div class="table-container">
  <table class="meshstl-channels" aria-label="MeshSTL Channels">
    <thead>
      <tr>
        <th>Channel Name</th>
        <th>Channel Role</th>
        <th>Purpose</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>LongFast</strong></td>
        <td><strong>Primary</strong></td>
        <td>Node discovery, chatting with nodes outside the MeshSTL network</td>
      </tr>
      <tr>
        <td><strong>MeshSTL</strong></td>
        <td><strong>Secondary</strong></td>
        <td>Primary internal mesh communication</td>
      </tr>
      <tr>
        <td><strong>Desired EAS channel/s</strong></td>
        <td><strong>Secondary</strong></td>
        <td>Emergency Alert System (EAS) alerts (see section below)</td>
      </tr>
    </tbody>
  </table>
</div>

	  <p style="margin-top: 20px;">To join the MeshSTL network:</p>
	  <ul style="margin-top: 10px; padding-left: 20px;">
	    <li>Scan the QR Code below on the Meshtastic App</li>
	    <li>Select Replace</li>
	    <li>Click Accept</li>
	  </ul>

	<p style="margin-top: 20px;">
  <a href="#" onclick="showQR(); return false;" style="color: #2C2D3C; text-decoration: underline;">
    Click here to scan a QR Code for all channels
  </a>
</p>

<!-- QR Modal -->
<div id="qrModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.6); align-items:center; justify-content:center;">
  <div style="background:white; padding:20px; border-radius:10px; position:relative; max-width:90%; max-height:90%; overflow:auto;">
    <span onclick="closeQR()" style="position:absolute; top:10px; right:15px; cursor:pointer; font-weight:bold; font-size: 24px;">&times;</span>
    <img src="/qr-code.png" alt="MeshSTL All Channels QR Code" style="max-width:100%; max-height:80vh; display:block; margin:auto;">
  </div>
</div>

<script>
  function showQR() {
    document.getElementById('qrModal').style.display = 'flex';
    document.body.classList.add('modal-open');
  }

  function closeQR() {
    document.getElementById('qrModal').style.display = 'none';
    document.body.classList.remove('modal-open');
  }
</script>

<style>
  body.modal-open {
    overflow: hidden;
  }
</style>
	</section>

	<section id="easystem">
  	  <h3>EAS System</h3>
   	 <p>EAS System consist of special channels designed for emergency alert systems (EAS) sent from the dedicated EAS Node. It is used to broadcast critical emergency alerts within the MeshSTL LoRa and MQTT network.</p>
  	  <p>Ensure these settings are correctly configured in the device to ensure seamless integration with the EAS System. If you are configuring a Meshtastic device for these channel, follow the steps outlined here.</p>
  	  <p><strong>Important Notes:</strong> The uplink and downlink are only needed if you are using MQTT for communication. For other setups, these may not be necessary.</p>

  	  <h4>Coverage Area (Counties/Cities)</h4>
  	  <img src="MeshSTL-EAS.png" alt="Map showing coverage area of EAS System channels" style="max-width:100%; height:auto; margin-bottom:1em;">
  	  <p>The EAS System settings:</p>
  	  <ul>
   	     <li><strong>RED:</strong>MeshSTL-EAS</li>
   	     <li><strong>BLUE:</strong>CMRG-EAS</li>
		 <li><strong>PURPLE:</strong>ILMesh-EAS</li>
		 <li><strong>ORANGE:</strong>SEMO-EAS</li>
		 <li><strong>YELLOW:</strong>Ozarks-EAS</li>
		 <li><strong>PINK:</strong>NEMO-EAS</li>
		 <li><strong>PSK Key:</strong>AQ== (for all channels of EAS)</li>
  	  </ul>
	</section>

        <section id="mqtt-settings">
            <h3>MQTT Server (Recommended for Routers/Optional for Clients)</h3>
            <p>You can sync messages and extend the Mesh using the MeshSTL MQTT broker (CLIENT_MUTE and CLIENT_HIDDEN nodes won't extend the mesh). Enter these settings in your Meshtastic app.  
            In the <strong>Channel</strong> section of the radio config, make sure <strong>Uplink</strong> is enabled if you choose to use MQTT. <strong>Downlink</strong> is recommended on <em>LongFast</em> unless you don't want to extend the mesh more; however, it is recommended for MeshSTL and MeshSTL-EAS LoRa channels.</p>
        <ul>
            <li><strong>Host:</strong> mqtt.meshstl.org</li>
            <li><strong>Port:</strong> 1883</li>
	    <li><strong>Encryption:</strong> Yes</li>
            <li><strong>Username:</strong> MeshSTL</li>
            <li><strong>Password:</strong> meshstl</li>
	    <li><strong>Root Topic:</strong> msh/US/MO</li>

        </ul>
        <p>Using MQTT helps to extend the network by bridging radios beyond local LoRa range.</p>
    </section>

	<section id="meshview">
	  <h3>Mesh Info</h3>
	  <div style="
	    background-color: #fff3cd;
	    color: #856404;
	    padding: 15px 20px;
	    margin-bottom: 20px;
	    border: 2px solid #856404;
	    border-radius: 10px;
	    font-weight: bold;
	    font-size: 1.1rem;
	  ">
	    ⚠️ Currently testing. Site may go down without notice.
	  </div>
	  <p>
	    Access the Mesh Info via the 
	    <a href="https://meshview.meshstl.org/" target="_blank" style="color:#856404; text-decoration:underline;">
		Meshview app
	    </a>.
	  </p>
	</section>

<footer>
  &copy; 2025 MeshSTL Community. All rights reserved.
</footer>

<script>
  const menuToggle = document.getElementById('menu-toggle');
  const nav = document.getElementById('primary-navigation');

  menuToggle.addEventListener('click', () => {
    const isOpen = nav.classList.toggle('open');
    menuToggle.setAttribute('aria-expanded', isOpen);
  });

  // Close nav on mobile when a link is clicked
  nav.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      if (nav.classList.contains('open')) {
        nav.classList.remove('open');
        menuToggle.setAttribute('aria-expanded', false);
      }
    });
  });

  // QR modal function
  function showQR() {
    document.getElementById('qrModal').style.display = 'flex';
  }
</script>

<button id="scrollTopBtn" aria-label="Scroll to top" title="Scroll to top">⬆️</button>

<script>
  (function() {
    const scrollBtn = document.getElementById('scrollTopBtn');

    if (!scrollBtn) return;

    // Show button immediately if already scrolled past threshold on page load
    if (window.scrollY > 150) {
      scrollBtn.style.display = 'block';
    }

    window.addEventListener('scroll', () => {
      if (window.scrollY > 150) {
        scrollBtn.style.display = 'block';
      } else {
        scrollBtn.style.display = 'none';
      }
    });

    scrollBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
  })();
</script>


</body>
</html>
